<!DOCTYPE html>
<html class="loading" lang="en" data-bs-theme="light">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>BRidge Admin ‚Äî Tenants & Onboarding</title>

  <!-- Bootstrap + app css -->
  <link
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
    rel="stylesheet"
  />
  <link rel="stylesheet" href="/static/app.css?v=20251111" />  

  <script src="/static/js/locale.js?v=20251127" defer nonce="{{NONCE}}"></script>
  <script src="/static/js/admin-tenants.js?v=20251127" defer nonce="{{NONCE}}"></script>

</head>
<body>

  <!-- Locale strip -->
  <div class="d-flex align-items-center gap-2 mb-2 flex-wrap">
    <label class="form-label m-0" for="lang-select" data-i18n="language">Language</label>
    <select id="lang-select" class="form-select form-select-sm w-auto">
      <option value="en">English</option><option value="es">Espa√±ol</option><option value="zh">‰∏≠Êñá</option>
    </select>
    <label class="form-label m-0 ms-2" for="tz-select" data-i18n="timezone">Timezone</label>
    <input id="tz-select" class="form-control form-control-sm w-220" list="tz-list" placeholder="America/Phoenix" data-i18n-ph="timezone"/>
    <datalist id="tz-list">
      <option value="America/Phoenix"></option><option value="America/New_York"></option>
      <option value="America/Chicago"></option><option value="America/Los_Angeles"></option>
      <option value="UTC"></option><option value="Europe/London"></option><option value="Asia/Shanghai"></option>
    </datalist>
    <button id="save-locale" class="btn btn-outline-secondary btn-sm ms-1">
      <span data-i18n="save">Save</span>
    </button>
    <small class="text-muted ms-auto" id="local-time"></small>
  </div>

  <!-- Toast -->
  <div id="toast" class="toast-bridge" role="status" aria-live="polite" aria-atomic="true" tabindex="-1"></div>
  
  <nav class="nav nav-pills small">
    <a class="nav-link" href="/static/bridge-admin-dashboard.html">Dashboard</a>
    <a class="nav-link" href="/static/admin-billing.html">Billing</a>
    <a class="nav-link" href="/static/admin-compliance.html">Compliance</a>
    <a class="nav-link active" href="/static/admin-tenants.html">Tenants</a>
    <a class="nav-link" href="/static/indices.html">Indices</a>
    <a class="nav-link" href="/static/trader.html">Trader</a>
  </nav>

  <div class="container-fluid">
    <div class="d-flex align-items-center justify-content-between mb-3">
      <div class="d-flex align-items-center gap-2">
        <h2 class="mb-0">üè≠ BRidge Admin ‚Äî Tenants & Onboarding</h2>
        <span class="badge bg-light text-muted">Yards ¬∑ Mills ¬∑ Brokers ¬∑ Industrial</span>
      </div>
      <span class="health-badge" data-health-badge>‚óè Checking‚Ä¶</span>
    </div>

    <div class="row g-3">
      <!-- LEFT COLUMN: Applications -->
      <div class="col-lg-6">
        <div class="card">
          <div class="card-header d-flex align-items-center justify-content-between">
            <div>
              <strong>Applications</strong>
              <span class="small text-muted">/onboarding/applications</span>
            </div>
            <div class="d-flex align-items-center gap-2">
              <label class="small mb-0" for="appReviewedFilter">Reviewed</label>
              <select id="appReviewedFilter" class="form-select form-select-sm" style="max-width:150px">
                <option value="">(all)</option>
                <option value="false">Unreviewed</option>
                <option value="true">Reviewed</option>
              </select>
              <button id="reloadApps" class="btn btn-sm btn-outline-secondary">Refresh</button>
            </div>
          </div>
          <div class="card-body p-2">
            <div class="table-responsive" style="max-height:420px; overflow:auto;">
              <table class="table table-sm table-hover align-middle mb-0" id="appTbl">
                <thead class="table-light">
                  <tr>
                    <th>Created</th>
                    <th>Org</th>
                    <th>Entity</th>
                    <th>Role</th>
                    <th>Plan</th>
                    <th>Reviewed</th>
                  </tr>
                </thead>
                <tbody>
                  <tr><td colspan="6" class="text-muted text-center py-2">Loading‚Ä¶</td></tr>
                </tbody>
              </table>
            </div>
            <div class="small text-muted mt-2">
              Backed by <code>applications</code>. Click a row to view & add review notes.
            </div>
          </div>
        </div>
      </div>

      <!-- RIGHT COLUMN: Signups + Invites -->
      <div class="col-lg-6">
        <!-- Signups -->
        <div class="card mb-3">
          <div class="card-header d-flex align-items-center justify-content-between">
            <div>
              <strong>Yard Signups</strong>
              <span class="small text-muted">/tenants/signups</span>
            </div>
            <div class="d-flex align-items-center gap-2">
              <label class="small mb-0" for="signupStatusFilter">Status</label>
              <select id="signupStatusFilter" class="form-select form-select-sm" style="max-width:150px">
                <option value="">(all)</option>
                <option value="pending">pending</option>
                <option value="approved">approved</option>
                <option value="rejected">rejected</option>
              </select>
              <button id="reloadSignups" class="btn btn-sm btn-outline-secondary">Refresh</button>
            </div>
          </div>
          <div class="card-body p-2">
            <div class="table-responsive" style="max-height:220px; overflow:auto;">
              <table class="table table-sm table-hover align-middle mb-0" id="signupTbl">
                <thead class="table-light">
                  <tr>
                    <th>Created</th>
                    <th>Yard</th>
                    <th>Contact</th>
                    <th>Plan</th>
                    <th>Status</th>
                  </tr>
                </thead>
                <tbody>
                  <tr><td colspan="5" class="text-muted text-center py-2">Loading‚Ä¶</td></tr>
                </tbody>
              </table>
            </div>
            <div class="small text-muted mt-2">
              Backed by <code>tenant_signups</code>. Approvals can drive invites/org creation.
            </div>
          </div>
        </div>

        <!-- Invites & Orgs -->
        <div class="card">
          <div class="card-header d-flex align-items-center justify-content-between">
            <div>
              <strong>Invites & Tenants</strong>
              <span class="small text-muted">/orgs ¬∑ /invites</span>
            </div>
            <div class="d-flex align-items-center gap-2">
              <label class="small mb-0" for="orgSelect">Org</label>
              <select id="orgSelect" class="form-select form-select-sm" style="max-width:220px">
                <option value="">(select org)</option>
              </select>
              <button id="reloadInvites" class="btn btn-sm btn-outline-secondary">Refresh Invites</button>
            </div>
          </div>
          <div class="card-body">
            <div class="row g-3">
              <div class="col-md-6">
                <h6 class="mb-2">Existing Invites</h6>
                <div class="table-responsive" style="max-height:200px; overflow:auto;">
                  <table class="table table-sm table-hover align-middle mb-0" id="inviteTbl">
                    <thead class="table-light">
                      <tr>
                        <th>Email</th>
                        <th>Role</th>
                        <th>Created</th>
                        <th>Accepted</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr><td colspan="4" class="text-muted text-center py-2">Select an org.</td></tr>
                    </tbody>
                  </table>
                </div>
              </div>
              <div class="col-md-6">
                <h6 class="mb-2">Create Invite</h6>
                <form id="inviteForm" class="row g-2">
                  <div class="col-12">
                    <label class="form-label" for="inviteOrg">Organization</label>
                    <input id="inviteOrg" class="form-control form-control-sm" readonly placeholder="Select org above">
                  </div>
                  <div class="col-12">
                    <label class="form-label" for="inviteEmail">Email</label>
                    <input id="inviteEmail" type="email" class="form-control form-control-sm" placeholder="user@company.com">
                  </div>
                  <div class="col-12">
                    <label class="form-label" for="inviteRole">Role</label>
                    <select id="inviteRole" class="form-select form-select-sm">
                      <option value="buyer">Buyer</option>
                      <option value="seller">Seller</option>
                      <option value="admin">Admin</option>
                    </select>
                  </div>
                  <div class="col-12 d-flex justify-content-end gap-2">
                    <button id="inviteCreate" type="button" class="btn btn-sm btn-primary">Send Invite</button>
                  </div>
                </form>
                <div class="small text-muted mt-2">
                  Invites write to <code>invites_log</code> with member = org key. Account creation can then map invites ‚Üí users.
                </div>
              </div>
            </div>
          </div>
        </div>

      </div> <!-- /right col -->
    </div> <!-- /row -->
  </div> <!-- /container -->

  <!-- Bootstrap -->
  <script
    nonce="{{NONCE}}"
    src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"
    crossorigin="anonymous"
    defer
  ></script>

  <footer class="legal-footer">
    <hr class="mb-3">
    <nav class="small d-flex flex-wrap gap-2 justify-content-center" aria-label="Legal navigation">
      <a href="/legal/terms.html" class="link-secondary" rel="noopener noreferrer">Terms</a><span>¬∑</span>
      <a href="/legal/privacy.html" class="link-secondary" rel="noopener noreferrer">Privacy</a><span>¬∑</span>
      <a href="/legal/eula.html" class="link-secondary" rel="noopener noreferrer">EULA</a><span>¬∑</span>
      <a href="/legal/aup.html" class="link-secondary" rel="noopener noreferrer">AUP</a><span>¬∑</span>
      <a href="/legal/cookies.html" class="link-secondary" rel="noopener noreferrer">Cookies</a><span>¬∑</span>
      <a href="/legal/subprocessors.html" class="link-secondary" rel="noopener noreferrer">Subprocessors</a><span>¬∑</span>
      <a href="/legal/dpa.html" class="link-secondary" rel="noopener noreferrer">DPA</a><span>¬∑</span>
      <a href="/legal/sla.html" class="link-secondary" rel="noopener noreferrer">SLA</a><span>¬∑</span>
      <a href="/legal/security.html" class="link-secondary" rel="noopener noreferrer">Security</a><span>¬∑</span>
      <a href="/legal/fees.html" class="link-secondary" rel="noopener noreferrer">Fee Schedule</a>
    </nav>

    <div class="mt-3"><strong>BRidge Platform</strong> ‚Äì Powered by ScrapFutures.com</div>
    <div>For acquisition inquiries or product demos:</div>
    <div><a href="mailto:info@atlasipholdingsllc.com">info@atlasipholdingsllc.com</a></div>
    <div class="mt-2">&copy; 2025 BRidge Technologies. All rights reserved.</div>
  </footer>
</body>
</html>
