<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"/>
  <title>BRidge — Apply for Access</title>
  <link rel="icon" href="/static/favicon.ico">
  <meta name="color-scheme" content="light dark">
  <link
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
    rel="stylesheet"
    integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
    crossorigin="anonymous"
  />
  <link rel="stylesheet" href="/static/css/apply.css">

  <script defer nonce="{{NONCE}}" src="https://js.stripe.com/v3/"></script>
  <script defer nonce="{{NONCE}}" src="/static/js/locale.js"></script>
</head>
<body>

<!-- Locale strip -->
<div class="d-flex align-items-center gap-2 mb-2 flex-wrap">
  <label class="form-label m-0" for="lang-select" data-i18n="language">Language</label>
  <select id="lang-select" class="form-select form-select-sm w-auto">
    <option value="en">English</option>
    <option value="es">Español</option>
    <option value="zh">中文</option>
  </select>

  <label class="form-label m-0 ms-2" for="tz-select" data-i18n="timezone">Timezone</label>
  <input id="tz-select" class="form-control form-control-sm w-220" list="tz-list" placeholder="America/Phoenix" data-i18n-ph="timezone"/>
  <datalist id="tz-list">
    <option value="America/Phoenix"></option><option value="America/New_York"></option>
    <option value="America/Chicago"></option><option value="America/Los_Angeles"></option>
    <option value="UTC"></option><option value="Europe/London"></option><option value="Asia/Shanghai"></option>
  </datalist>

  <button type="button" id="locale-save" class="btn btn-outline-secondary btn-sm ms-1">
    <span data-i18n="save">Save</span>
  </button>

  <small class="text-muted ms-auto" id="local-time" title="Local time"></small>
</div>

  <div class="container py-4">
    <div class="d-flex align-items-center justify-content-between mb-3">
      <div class="d-flex align-items-center gap-2">
        <svg width="28" height="28" viewBox="0 0 24 24" fill="none" aria-hidden="true">
          <path d="M4 12h16M4 6h10M4 18h10" stroke="#0f62fe" stroke-width="2" stroke-linecap="round"/>
        </svg>
        <h1 class="h4 m-0" data-i18n="apply_title">BRidge — Apply for Access</h1>
      </div>
      <span class="badge-live" data-health>● Checking…</span>
    </div>
    
 <!-- Toast + endpoint + api helper -->
    <div id="toast" role="status" aria-live="polite" aria-atomic="true" tabindex="-1"></div>

    <div id="alert" class="alert d-none" role="status" aria-live="polite"></div>

    <div class="card p-3 p-md-4">
      <form id="applyForm" novalidate>
        <div class="row g-3">
          <!-- Org & role -->
          <div class="col-md-4">
            <label class="form-label req" for="entity_type" data-i18n="entity_type">Entity Type</label>
            <select id="entity_type" class="form-select" required name="entity_type">
            <option value="">Select…</option>
            <option value="yard">Scrap Yard</option>
            <option value="mill">Mill</option>
            <option value="industrial">Industrial Generator</option>
            <option value="manufacturer">Manufacturer</option>
            <option value="broker">Broker</option>
          </select>

          </div>
          <div class="col-md-4">
            <label class="form-label req" for="role" data-i18n="role">Role</label>
            <select id="role" class="form-select" required aria-required="true" name="role">
              <option value="">Select…</option>
              <option value="buyer">Buyer</option>
              <option value="seller">Seller</option>
              <option value="both">Both</option>
            </select>
          </div>
          <div class="col-md-4">
            <label class="form-label req" for="org_name" data-i18n="organization">Organization</label>
            <input id="org_name" name="org_name" autocomplete="organization" class="form-control" placeholder="Company / Yard name" required aria-required="true">
          </div>

          <!-- Company details -->
          <div class="col-md-4">
            <label class="form-label" for="ein">EIN</label>
            <input id="ein" name="ein" class="form-control" inputmode="numeric"
                   pattern="^\d{2}-\d{7}$" title="Format: 12-3456789" placeholder="12-3456789">
          </div>
          <div class="col-md-6">
            <label class="form-label" for="website">Website</label>
            <input id="website" name="website" class="form-control" inputmode="url" autocomplete="url" placeholder="https://example.com">
          </div>
          <div class="col-md-2">
            <label class="form-label" for="monthly_volume_tons">Monthly Volume (tons)</label>
            <input id="monthly_volume_tons" name="monthly_volume_tons" type="number" min="0" step="1" class="form-control" placeholder="e.g., 1200">
          </div>

          <!-- Address -->
          <div class="col-md-6">
            <label class="form-label" for="address">Address</label>
            <input id="address" name="address" autocomplete="street-address" class="form-control" placeholder="Street">
          </div>
          <div class="col-md-4">
            <label class="form-label" for="city">City</label>
            <input id="city" name="city" autocomplete="address-level2" class="form-control" placeholder="City">
          </div>
          <div class="col-md-2">
            <label class="form-label" for="region">State/Region</label>
            <input id="region" name="region" autocomplete="address-level1" class="form-control" placeholder="IN">
          </div>

          <!-- Contact -->
          <div class="col-md-4">
            <label class="form-label req" for="contact_name" data-i18n="contact_name">Contact Name</label>
            <input id="contact_name" name="contact_name" autocomplete="name" class="form-control" placeholder="Full name" required aria-required="true">
          </div>
          <div class="col-md-4">
            <label class="form-label req" for="email" data-i18n="email">Email</label>
            <input id="email" name="email" type="email" class="form-control" autocomplete="email" placeholder="name@company.com" required aria-required="true">
          </div>
          <div class="col-md-4">
            <label class="form-label" for="phone" data-i18n="phone">Phone</label>
            <input id="phone" name="phone" inputmode="tel" autocomplete="tel" class="form-control" placeholder="(555) 555-5555">
          </div>

          <!-- Honeypot anti-spam -->
          <div class="hp" aria-hidden="true">
            <label>Fax</label><input id="fax_hp" tabindex="-1" autocomplete="off">
          </div>

          <!-- Referral / UTM -->
          <div class="col-md-4">
            <label class="form-label" for="ref_code">Referral Code</label>
            <input id="ref_code" name="ref_code" class="form-control" placeholder="(optional)">
          </div>

          <!-- Materials / lanes / compliance -->
          <div class="col-md-6">
            <label class="form-label" for="materials_buy">Materials Buying</label>
            <input id="materials_buy" name="materials_buy" class="form-control" placeholder="e.g., Shred, 5' HMS, #1 Copper">
          </div>
          <div class="col-md-6">
            <label class="form-label" for="materials_sell">Materials Selling</label>
            <input id="materials_sell" name="materials_sell" class="form-control" placeholder="e.g., P&S, #2 Copper, Zorba">
          </div>
          <div class="col-md-6">
            <label class="form-label" for="lanes">Primary Lanes</label>
            <input id="lanes" name="lanes" class="form-control" placeholder="e.g., IN→OH">
          </div>
          <div class="col-md-6">
            <label class="form-label" for="compliance_notes">Compliance Notes</label>
            <input id="compliance_notes" name="compliance_notes" class="form-control" placeholder="EPA permits, etc.">
          </div>

          <!-- Plan + notes -->
          <div class="col-md-4">
            <label class="form-label req" for="plan" data-i18n="plan">Plan</label>
            <select id="plan" name="plan" class="form-select" required aria-required="true">
              <option value="">Select…</option>
              <option value="starter">Starter</option>
              <option value="standard">Standard</option>
              <option value="enterprise">Enterprise</option>
            </select>
          </div>
          <div class="col-md-8">
            <label class="form-label" for="notes">Notes</label>
            <input id="notes" name="notes" class="form-control" placeholder="Anything else we should know?">
          </div>
          <!-- Payment Method (required) -->
          <div class="col-12">
            <div class="card p-3 pm-card">
              <div class="d-flex justify-content-between align-items-center">
                <div>
                  <label class="form-label req" id="payment_method_lbl">Payment Method on File</label>
                  <div id="pmStatus" class="form-hint">No payment method yet.</div>
                </div>
                <div class="d-flex gap-2">                  
                  <button type="button" id="addPmBtn" class="btn btn-outline-primary" data-i18n="add_payment_method">Add Payment Method</button>
                  <button type="button" id="refreshPmBtn" class="btn btn-outline-secondary" data-i18n="refresh">Refresh</button>
                  <button type="button" id="startSubBtn" class="btn btn-success" disabled data-i18n="start_subscription">Start Subscription</button>                  
                </div>
              </div>
              <div class="form-hint mt-1">
                We accept ACH (US bank) and credit/debit cards. You will not be charged at signup.<br>
                <span id="subHint" class="text-muted">Choose a plan and add a payment method to enable “Start Subscription”.</span>
              </div>
            </div>
          </div>

          <!-- Terms -->
          <div class="col-12">
            <div class="form-check">
              <input class="form-check-input" type="checkbox" id="agree" required>
              <label class="form-check-label" for="agree">
                I agree to the <a href="/terms" target="_blank" rel="noopener noreferrer">Terms</a> and <a href="/privacy" target="_blank" rel="noopener noreferrer">Privacy</a>.
              </label>
            </div>
          </div>
        </div>

        <div class="form-check my-3">
          <input class="form-check-input" type="checkbox" id="feesAgree" required>
          <label class="form-check-label" for="feesAgree">
            I have read and agree to the <a href="/fees" target="_blank" rel="noopener">BRidge Fee Schedule</a>.
          </label>
        </div>
        <div class="d-flex gap-2 mt-3">
          <button type="submit" id="submitBtn" class="btn btn-primary" disabled data-i18n="submit_application">Submit Application</button>
        </div>
        <div class="form-hint mt-2">Fields marked with <span class="text-danger">*</span> are required.</div>
      </form>
    </div>

    <footer class="text-center text-muted mt-4 small">
      <hr class="mb-3">
      <nav class="small d-flex flex-wrap gap-2 justify-content-center" aria-label="Legal navigation">
        <a href="/terms"               class="link-secondary" rel="noopener noreferrer">Terms of Use</a><span>·</span>
        <a href="/eula"                class="link-secondary" rel="noopener noreferrer">EULA</a><span>·</span>
        <a href="/privacy"             class="link-secondary" rel="noopener noreferrer">Privacy Policy</a><span>·</span>
        <a href="/aup"                 class="link-secondary" rel="noopener noreferrer">Acceptable Use</a><span>·</span>
        <a href="/cookies"             class="link-secondary" rel="noopener noreferrer">Cookie Notice</a><span>·</span>
        <a href="/legal/subprocessors" class="link-secondary" rel="noopener noreferrer">Subprocessors</a><span>·</span>
        <a href="/legal/dpa"           class="link-secondary" rel="noopener noreferrer">DPA</a><span>·</span>
        <a href="/legal/sla"           class="link-secondary" rel="noopener noreferrer">SLA</a><span>·</span>
        <a href="/legal/security"      class="link-secondary" rel="noopener noreferrer">Security Overview</a><span>·</span>
        <a href="/privacy/appendix"    class="link-secondary" rel="noopener noreferrer">Privacy Appendix (APAC &amp; CA)</a><span>·</span>
        <a href="/fees"                class="link-secondary" rel="noopener noreferrer">Fee Schedule</a>
      </nav>

      <div class="mt-3"><strong>BRidge Platform</strong> — Powered by ScrapFutures.com</div>
      <div>Need help? <a href="mailto:support@scrapfutures.com">support@scrapfutures.com</a></div>
    </footer>
  </div> 

<script defer nonce="{{NONCE}}" src="/static/js/apply.js"></script>

</body>
</html>