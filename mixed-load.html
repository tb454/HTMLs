<div style="font-family: Arial, sans-serif; max-width: 1000px; margin: auto; padding: 24px; background-color: #fdfdfd; border: 1px solid #ccc; border-radius: 10px; line-height: 1.6;">
    <h2 style="text-align:center; color: #003366;">BRidge Mixed-Material Futures Contract (Editable)</h2>
    <table style="width: 100%; border-collapse: collapse; margin-top: 12px;">
      <thead>
        <tr style="background-color: #e0e0e0;">
          <th style="padding: 8px; border: 1px solid #bbb;">Material</th>
          <th style="padding: 8px; border: 1px solid #bbb;">% of Load</th>
          <th style="padding: 8px; border: 1px solid #bbb;">Recovered Weight (lbs)</th>
          <th style="padding: 8px; border: 1px solid #bbb;">Market Price/lb ($)</th>
          <th style="padding: 8px; border: 1px solid #bbb;">Total Value ($)</th>
        </tr>
      </thead>
      <tbody id="contractTable">
        <tr>
          <td><input type="text" value="Aluminum" onchange="recalculate()" /></td>
          <td><input type="number" value="40" onchange="recalculate()" /></td>
          <td><input type="number" value="4000" onchange="recalculate()" /></td>
          <td><input type="number" step="0.01" value="1.05" onchange="recalculate()" /></td>
          <td class="totalValue">$4,200.00</td>
        </tr>
        <tr>
          <td><input type="text" value="Rubber" onchange="recalculate()" /></td>
          <td><input type="number" value="60" onchange="recalculate()" /></td>
          <td><input type="number" value="6000" onchange="recalculate()" /></td>
          <td><input type="number" step="0.01" value="0.35" onchange="recalculate()" /></td>
          <td class="totalValue">$2,100.00</td>
        </tr>
      </tbody>
    </table>
  
    <br>
  
    <table style="width: 100%; border-collapse: collapse; margin-top: 24px;">
      <thead>
        <tr style="background-color: #f0f0f0;">
          <th style="text-align: left; padding: 8px;">Valuation Input</th>
          <th style="text-align: left; padding: 8px;">Amount</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td style="padding: 8px;">Yard Margin (%)</td>
          <td style="padding: 8px;"><input type="number" id="marginInput" value="5" onchange="recalculate()" />%</td>
        </tr>
        <tr>
          <td style="padding: 8px;">Contract Fee ($)</td>
          <td style="padding: 8px;"><input type="number" id="feeInput" value="50" onchange="recalculate()" /></td>
        </tr>
        <tr>
          <td style="padding: 8px;"><strong>Raw Total Value ($)</strong></td>
          <td style="padding: 8px;"><strong>$<span id="rawValue">6300.00</span></strong></td>
        </tr>
        <tr>
          <td style="padding: 8px;"><strong>After Yard Margin ($)</strong></td>
          <td style="padding: 8px;">$<span id="afterMargin">5985.00</span></td>
        </tr>
        <tr>
          <td style="padding: 8px;"><strong>+ Contract Fee ($)</strong></td>
          <td style="padding: 8px;">$<span id="finalValue">6035.00</span></td>
        </tr>
      </tbody>
    </table>
  </div>
  
  <script>
  function recalculate() {
    const rows = document.querySelectorAll("#contractTable tr");
    let rawTotal = 0;
  
    rows.forEach(row => {
      const weight = parseFloat(row.cells[2].querySelector("input").value) || 0;
      const price = parseFloat(row.cells[3].querySelector("input").value) || 0;
      const total = weight * price;
      row.querySelector(".totalValue").textContent = `$${total.toFixed(2)}`;
      rawTotal += total;
    });
  
    const marginPercent = parseFloat(document.getElementById("marginInput").value) || 0;
    const contractFee = parseFloat(document.getElementById("feeInput").value) || 0;
  
    const afterMargin = rawTotal * (1 - marginPercent / 100);
    const finalValue = afterMargin + contractFee;
  
    document.getElementById("rawValue").textContent = rawTotal.toFixed(2);
    document.getElementById("afterMargin").textContent = afterMargin.toFixed(2);
    document.getElementById("finalValue").textContent = finalValue.toFixed(2);
  }
  
  recalculate(); // run once at load
  </script>
  